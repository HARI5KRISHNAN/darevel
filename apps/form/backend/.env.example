# ==============================================
# Form Services - Environment Variables
# ==============================================
# Copy this file to .env and fill in your values
# ==============================================

# ============================================
# Google Gemini API (Required for AI Service)
# ============================================
# Get your API key from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here

# ============================================
# Database Configuration
# ============================================
DB_HOST=localhost
DB_PORT=5440
DB_USER=postgres
DB_PASSWORD=postgres

# Individual database names (created by init-dbs.sql)
DB_FORM=darevel_form
DB_RESPONSE=darevel_form_response
DB_ANALYTICS=darevel_form_analytics

# ============================================
# Keycloak / OAuth2 Configuration
# ============================================
JWT_ISSUER_URI=http://localhost:8080/realms/darevel
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=darevel

# ============================================
# Kafka Configuration
# ============================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# Kafka topics used by services
KAFKA_TOPIC_SUBMISSION_CREATED=form.submission.created
KAFKA_TOPIC_FORM_UPDATED=form.updated

# ============================================
# Service Ports
# ============================================
FORM_SERVICE_PORT=8090
RESPONSE_SERVICE_PORT=8091
PUBLIC_LINK_SERVICE_PORT=8092
ANALYTICS_SERVICE_PORT=8093
AI_FORM_SERVICE_PORT=8094

# ============================================
# Service URLs (for inter-service communication)
# ============================================
FORM_SERVICE_URL=http://localhost:8090
RESPONSE_SERVICE_URL=http://localhost:8091

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:3002,http://localhost:3005

# For public-link-service (allows all origins)
CORS_ORIGINS_PUBLIC=*

# ============================================
# Rate Limiting
# ============================================
# Public Link Service rate limits
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_IP=10

# AI Form Service rate limits
RATE_LIMIT_REQUESTS_PER_USER=20

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=DEBUG
LOG_PATTERN=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ============================================
# Spring Profiles
# ============================================
SPRING_PROFILES_ACTIVE=dev

# ============================================
# Flyway Configuration (Analytics Service)
# ============================================
FLYWAY_ENABLED=true
FLYWAY_BASELINE_ON_MIGRATE=true
FLYWAY_LOCATIONS=classpath:db/migration

# ============================================
# JPA/Hibernate Configuration
# ============================================
# Options: validate, update, create, create-drop
JPA_DDL_AUTO=validate
JPA_SHOW_SQL=true

# ============================================
# Docker Compose Override (Optional)
# ============================================
# Uncomment and modify if running in Docker
# DB_HOST=postgres-form
# KAFKA_BOOTSTRAP_SERVERS=kafka:9092
# FORM_SERVICE_URL=http://form-service:8090
# RESPONSE_SERVICE_URL=http://response-service:8091
# JWT_ISSUER_URI=http://keycloak:8080/realms/darevel
